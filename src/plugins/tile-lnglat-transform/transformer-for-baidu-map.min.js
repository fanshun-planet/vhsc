import BMap from"./sdk.min";class TransformClassBaidu{constructor(levelRange_max,LevelRange_min){this.levelMax=levelRange_max;this.levelMin=LevelRange_min;this.projection=new BMap.MercatorProjection()}_getRetain(level){return Math.pow(2,level-18)}getResolution(latitude,level){return Math.pow(2,18-level)*Math.cos(latitude)}lnglatToPoint(longitude,latitude){let lnglat=new BMap.Point(longitude,latitude);let point=this.projection.lngLatToPoint(lnglat);return{pointX:point.x,pointY:point.y}}pointToLnglat(pointX,pointY){let point=new BMap.Pixel(pointX,pointY);let lnglat=this.projection.pointToLngLat(point);return{lng:lnglat.lng,lat:lnglat.lat}}_lngToTileX(longitude,level){let point=this.lnglatToPoint(longitude,0);let tileX=Math.floor((point.pointX*this._getRetain(level))/256);return tileX}_latToTileY(latitude,level){let point=this.lnglatToPoint(0,latitude);let tileY=Math.floor((point.pointY*this._getRetain(level))/256);return tileY}lnglatToTile(longitude,latitude,level){let tileX=this._lngToTileX(longitude,level);let tileY=this._latToTileY(latitude,level);return{tileX,tileY}}_lngToPixelX(longitude,level){let tileX=this._lngToTileX(longitude,level);let point=this.lnglatToPoint(longitude,0);let pixelX=Math.floor(point.pointX*this._getRetain(level)-tileX*256);return pixelX}_latToPixelY(latitude,level){let tileY=this._latToTileY(latitude,level);let point=this.lnglatToPoint(0,latitude);let pixelY=Math.floor(point.pointY*this._getRetain(level)-tileY*256);return pixelY}lnglatToPixel(longitude,latitude,level){let pixelX=this._lngToPixelX(longitude,level);let pixelY=this._latToPixelY(latitude,level);return{pixelX,pixelY}}_pixelXToLng(pixelX,tileX,level){let pointX=(tileX*256+pixelX)/this._getRetain(level);let lnglat=this.pointToLnglat(pointX,0);return lnglat.lng}_pixelYToLat(pixelY,tileY,level){let pointY=(tileY*256+pixelY)/this._getRetain(level);let lnglat=this.pointToLnglat(0,pointY);return lnglat.lat}pixelToLnglat(pixelX,pixelY,tileX,tileY,level){let pointX=(tileX*256+pixelX)/this._getRetain(level);let pointY=(tileY*256+pixelY)/this._getRetain(level);let lnglat=this.pointToLnglat(pointX,pointY);return lnglat}}export default TransformClassBaidu;